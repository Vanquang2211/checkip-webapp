<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Mini-App Check IP Pro</title>
<style>
body{font-family:sans-serif;text-align:center;background:#1b1b1b;color:#fff;margin:0;padding:20px;}
h2{color:#f1c40f;}
input{padding:10px;width:200px;border-radius:5px;border:none;font-size:16px;}
button{padding:10px 20px;font-size:16px;margin-left:10px;border:none;border-radius:5px;cursor:pointer;background:#3498db;color:#fff;transition:0.2s;}
button:hover{background:#2980b9;}
#result{margin-top:20px;text-align:left;background:#2c3e50;padding:15px;border-radius:8px;}
.success{background:#27ae60;}
.error{background:#c0392b;}
#map{margin-top:15px;width:100%;height:200px;border-radius:8px;}
</style>
</head>
<body>
<h2>Mini-App Check IP Pro</h2>
<p>Nháº­p IP hoáº·c Ä‘á»ƒ trá»‘ng:</p>
<input type="text" id="ipInput" placeholder="VÃ­ dá»¥: 8.8.8.8">
<button onclick="checkIP()">Check IP</button>

<div id="result"></div>
<div id="map"></div>

<script>
function checkIP(){
    let ip=document.getElementById("ipInput").value.trim();
    let url = ip ? `https://ipapi.co/${ip}/json/` : `https://ipapi.co/json/`;
    document.getElementById("result").innerHTML="â³ Äang kiá»ƒm tra IP...";
    fetch(url)
    .then(res=>res.json())
    .then(data=>{
        if(data.error){
            document.getElementById("result").innerHTML="âŒ IP sai hoáº·c khÃ´ng tÃ¬m tháº¥y.";
            document.getElementById("result").className="error";
            return;
        }
        let resultText=`
<b>ğŸ›° Káº¿t quáº£ Check IP</b><br>
ğŸŒ IP: ${data.ip}<br>
ğŸ™ Quá»‘c gia: ${data.country_name}<br>
ğŸ“ ThÃ nh phá»‘: ${data.city}<br>
ğŸ¢ ISP: ${data.org}<br>
ğŸŒ VÄ© Ä‘á»™: ${data.latitude}<br>
ğŸŒ Kinh Ä‘á»™: ${data.longitude}<br>
ğŸ” Proxy/VPN: ${data.proxy?"CÃ³":"KhÃ´ng biáº¿t"}<br>
â± Timezone: ${data.timezone}
`;
        document.getElementById("result").innerHTML=resultText;
        document.getElementById("result").className="success";

        // Map OpenStreetMap
        document.getElementById("map").innerHTML=`<iframe width="100%" height="200" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"
        src="https://www.openstreetmap.org/export/embed.html?bbox=${data.longitude-0.5}%2C${data.latitude-0.5}%2C${data.longitude+0.5}%2C${data.latitude+0.5}&layer=mapnik&marker=${data.latitude}%2C${data.longitude}"></iframe>`;

        // Gá»­i dá»¯ liá»‡u vá» bot
        Telegram.WebApp.sendData(JSON.stringify({ip: ip, result: resultText}));
    })
    .catch(err=>{
        document.getElementById("result").innerHTML="âŒ Lá»—i khi kiá»ƒm tra IP.";
        document.getElementById("result").className="error";
    });
}
</script>
</body>
</html>
